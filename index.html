<head> 
   <link href="https://db.onlinewebfonts.com/c/1db29588408eadbd4406aae9238555eb?family=Consolas" rel="stylesheet" type="text/css"/>



<style>
   




body {
  font-family: "Consolas";
  background: white;
  color: black;
  -webkit-text-size-adjust: 100%;
   
    line-height: 1.8;
}
   
div {
   line-height: 1.8;
}
subraya {
  background: black;
  color: white;
  font-weight: lighter;
    line-height: 1.8;
}


@media (min-width: 0px) and (max-width: 50000px) {
 div {
      font-size:1.9em;
  }    
   
   iframe {
       width: 560;
       height: 315;
    }
}


body {
    -moz-transform: scale(1); /* for Firefox, default 1*/
    zoom:100%; /* For Chrome, IE, default 100%*/
    -webkit-text-size-adjust: 100%;
   
    line-height: 1.8;
}


</style>


</head>





<head>
    <script src=
"https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.3/moment.min.js">
    </script>
</head>

<body>
<div>
  <p>CLASES DE INGLÉS GRATUITAS EN UNA CAFETERÍA</p>
 <p>en Barcelona</p>
  <p> <a href=#video>Video de una clase</a> // <a href=#quien> Quién soy </a></p>
 <pre>
    <div/>
  <div>
   cargando
   calendario
      ...
    <pre>
    
    
    
    
    
    
    
































































    
    
    
    
    
    
    
    
    
    
    
    </pre>
</div>
 </pre>
<div>
    <pre>

</div>

</pre>
  <div id="video">
   <!--iframe width="560" height="315" src="https://www.youtube.com/embed/XIMLoLxmTDw?si=Ay1LvwpgR8rlRaII" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe-->
      <pre>

--</pre>
  </div>
  <div id="quien">
    QUIÉN SOY</br>
    <p>Soy ex-informático de Barcelona, no soy ni de Oxford ni de Cambridge.
  He trabajado en empresas de UK y USA. Ahora doy clases de inglés.</p>
  <p>--</p>
  
    <P>VALORACIONES</P>
  <P>"no esperaba que una clase de inglés fuera tan divertida"
  </P>
"se me ha pasado el tiempo volando"
<P>
  <p>--</p>
<p>¿PORQUÉ GRATUITAS?</P>
<P>No pagar nada es la manera de ayudarte a empezar de nuevo con el inglés. Así puedes comprobar si aprender con mi ayuda te ayuda. Con el tiempo ya hablaremos de precios.<p>
    
  </div>

    
   <div> <p>--</p>
    
Por último, intenta ser puntual, es de agradecer.
<testing-box><pre>





















































































   



















   

   
</pre><testing></testing></testing-box></div>
   <script>
var url = "https://render-table-718778053249.europe-west1.run.app/hola"


function HttpPost(nom, tel , time){
    const xhr = new XMLHttpRequest();           
  xhr.open("POST", "https://reserve-718778053249.europe-west1.run.app", true);
  xhr.setRequestHeader('Content-Type', 'application/json')
 


  // Send the proper header information along with the request

   xhr.onreadystatechange = () => {
    // Call a function when the state changes.
    if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
      // Request finished. Do processing here.
    }
  };
  xhr.send(JSON.stringify({'nom':nom,"tel":tel,"time": time}));

           }
function httpGet(theUrl)
{
  
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
    xmlHttp.send( null );
    return xmlHttp.responseText;
}
function reserva(input){
  let person = prompt("INTRODUCE TU NOMBRE", "");
  let telephone;
  if (person == null || person == "") {
    text = "CANCELADO. Si prefieres reserva por email: l.de."+"llobet"+"@"+"gmail.com";
    alert(text)
  } else {
     telephone = prompt("INTRODUCE TU TELÉFONO, ASÍ CONFIRMAMOS", "");
    if (telephone == null || telephone == "") {
      
      var text
      text = "CANCELADO. Si prefieres reserva por email: l.de."+"llobet"+"@"+"gmail.com";
    alert(text)
    } else {
     HttpPost(person, telephone, input)
     var text = "RESERVANDO...";
    alert(text)
    }
  }
 }
  
function calcHeight(){
 
  var past;
  var pastdiff=0
  
  
       document.getElementsByTagName("testing")[0].style.fontSize=(2+"px")
       past = document.getElementsByTagName("testing")[0].offsetHeight
       document.getElementsByTagName("testing")[0].style.fontSize=(4+"px")
       var pastdiff = document.getElementsByTagName("testing")[0].offsetHeight - past
      
  for (let i = 6; i < 200; i = i + 2 ) {
    console.log(i)
    
       past = document.getElementsByTagName("testing")[0].offsetHeight
       document.getElementsByTagName("testing")[0].style.fontSize=(i+"px")
       var diff = document.getElementsByTagName("testing")[0].offsetHeight - past

        if(diff < 1 ){
            diff = pastdiff
        }
            
        console.log("i "+i+" diff "+diff +"past "+pastdiff)
        if(pastdiff * 4 < diff || i > 60){
            ([].slice.call(document.getElementsByTagName("div"))).map(seccio => seccio.style.fontSize=(i-4)+"px");
            ([].slice.call(document.getElementsByTagName("p"))).map( seccio=> seccio.style.fontSize=(i-4)+"px");
   
           return
       }
        pastdiff = diff
   }
}
function loadTable(){
 {
  if (document.hidden) {
    return
  }
  document.getElementsByTagName("div")[1].innerHTML=JSON.parse(httpGet(url)).values
           .reduce((accum, curr) =>
                   {if(accum.week != curr[4]){ 
                    
                     accum.result.push(["_______________________________________"])}
                    if(accum.day != curr[5] && accum.week === curr[4] ){ 
                    
                     accum.result.push(["--------"])}  accum.week=curr[4];accum.day=curr[5]; curr.splice(4,1);accum.result.push(curr); return accum},{week: 0, day: 0 , result: []})
     .result.map(hora=> hora.reduce(( acc, curr)=> { if(curr.length <= 3){
                                                    return  acc + "··" + curr.padEnd(4,"·")}; 
                                                    return acc + "··" + curr.padEnd(10,"·") })
                )
           .reduce((accum, curr) => { 
  if (curr.includes("RESERVALA") && !curr.includes("attendee")){
      return accum +  "<br/>" + curr.substring(0,curr.length-(6))
      }
     
      if (!curr.includes("RESERVALA") && curr.includes("1 attendee")){
      return accum +  "<br/>" + curr.substring(0,curr.length-(50-19+1)) + "···xConfirmar"
      }
    
    
          if (curr.includes("RESERVALA") && curr.includes("attendees")){
      return accum +  "<br/>" + curr.substring(0,curr.length-(19)).replace(/<[^>]*>/g, "").replace("RESERVALA!·","···xMEETUP");
      }
          if (!curr.includes("RESERVALA") && curr.includes("attendees")){
      return accum +  "<br/>" + curr.substring(0,curr.length-(50-18+1)) + "···········"
      }
        if (curr.includes("RESERVALA") && curr.includes("attendee")){
      return accum +  "<br/>" + curr.substring(0,curr.length-(19)).replace("RESERVALA!","RESERVALA*")
      }
    
  return accum + "<br/>" + curr.substring(0,curr.length-(50-19+1))
}).replaceAll("··················","") + "<br/>_______________________________________"
}
}
      
      
setTimeout(loadTable, 300)
      
setInterval(loadTable, 4000)
setTimeout(() => {document.getElementsByTagName("testing")[0].innerHTML=document.getElementsByTagName("div")[1].innerHTML ;
                  document.getElementsByTagName("div")[1].innerHTML="";
                 },750)
setTimeout(calcHeight, 800)
setTimeout(() => {
   document.getElementsByTagName("div")[1].innerHTML=document.getElementsByTagName("testing")[0].innerHTML;
   console.log(document.getElementsByTagName("div")[1].innerHTML)
   document.getElementsByTagName("testing-box")[0].innerHTML="" }, 1200)
           




</script>

</body>
